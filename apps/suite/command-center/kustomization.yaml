apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - helmrelease.yaml
  - ingressroute-command-center.yaml
  - ingressroute-command-center-api.yaml
  - ingressroute-command-center-api-sse.yaml
  - api-shim-deploy.yaml
  - api-shim-service.yaml

  # existing netpols
  - netpol-allow-all-to-suite-command-center-ui-80.yaml
  - netpol-allow-suite-to-suite-command-center-ui.yaml
  - netpol-allow-traefik-to-suite-command-center-ui-80.yaml

  # NEW: netpols for 3000
  - netpol-allow-all-to-suite-command-center-ui-3000.yaml
  - netpol-allow-traefik-to-suite-command-center-ui-3000.yaml

patchesStrategicMerge:
  # existing patches (keep if you already had them; harmless if no-op)
  - patches/patch-ui-service-targetport-80.yaml
  - patches/patch-ui-deploy-containerport-80.yaml

  # NEW: 3000 alignment
  - patches/patch-ui-env-bind-0.0.0.0-port-3000.yaml
  - patches/patch-ui-service-targetport-3000.yaml
  - patches/patch-ui-deploy-containerport-3000.yaml
