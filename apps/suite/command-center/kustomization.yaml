apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - chart
  - ingressroute-command-center.yaml
  - ingressroute-command-center-api.yaml
  - ingressroute-command-center-api-sse.yaml

  # UI netpols (3000)
  - netpol-allow-all-to-suite-command-center-ui-3000.yaml
  - netpol-allow-traefik-to-suite-command-center-ui-3000.yaml

  # API hardening (optional, keep if you created them)
  - api-clusterrole.yaml
  - api-clusterrolebinding.yaml
  - api-serviceaccount.yaml
  - netpol-allow-api-to-kube-apiserver.yaml

  # SSE middleware (if you created these)
  - mw-command-center-sse.yaml
  - mw-command-center-http11.yaml

patchesStrategicMerge:
  # UI alignment
  - patches/patch-ui-env-bind-0.0.0.0-port-3000.yaml
  - patches/patch-ui-service-targetport-3000.yaml
  - patches/patch-ui-deploy-containerport-3000.yaml

  # API service alignment
  - patches/patch-api-service-targetport-8000.yaml

  # SSE route patch (if you created it)
  - patch-ingressroute-sse.yaml
